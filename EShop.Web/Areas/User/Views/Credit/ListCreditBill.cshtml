@using EShop.DataLayer.Enum
@using EShop.Core.Helpers
@model IEnumerable<EShop.DataLayer.Entities.Credit.CreditBill>

@{
    ViewData["Title"] = "لیست پرداخت ها";
    Layout = "~/Areas/User/Views/Shared/_UserLayout.cshtml";
}


@section Style
{

<link rel="stylesheet" href="/css/vendor/noUISlider.min.css">

}
@if (TempData["success"] != null)
{
    <div class="col-lg-12 row p-2">
        <div class="col-12 alert alert-success d-flex justify-content-between">
            <p class="mb-0">
                @TempData["success"]
            </p>


        </div>
    </div>
}

<div class="profile-stats">
    <div class="table-favorites">
        @if (Model.Any())
        {
            <table class="table ns-table table-profile-favorites">
                <thead>
                    <tr>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Id)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Price)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.ConfirmPrice)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Code)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.Status)
                        </th>
                        <th scope="col">
                            @Html.DisplayNameFor(model => model.DatePay)
                        </th>
                        <th class="actions-th"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="border-0">

                            <td>
                                @item.Id
                            </td>
                            <td>
                                @item.Price.ToString("N0")
                            </td>
                            <td>
                                @item.ConfirmPrice?.ToString("N0")
                            </td>
                            <td>

                                @item.Code
                            </td>

                            <td>
                                @{
                                    var status = "";
                                    if (item.Status > 0)
                                    {
                                        status = EnumHelper<EnumCreditBillStatus>
                                        .GetDisplayValue(item.Status);
                                    }
                                    if (item.Status == EnumCreditBillStatus.Confirm)
                                    {
                                        <span class="text-success">
                                            @status
                                        </span>
                                    }
                                    else if (item.Status == EnumCreditBillStatus.Reject)
                                    {
                                        <span class="text-danger">
                                            @status
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="text-primary">
                                            @status
                                        </span>
                                    }
                                }

                            </td>
                            <td>

                                @item.DatePay?.ConvertMiladiToShamsi()
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" class="border-grey">
                                @if (!string.IsNullOrWhiteSpace(item.AdminMessage))
                                {
                                    <small><strong>پیغام کارشناس : </strong>@item.AdminMessage</small>
                                }
                            </td>
                        </tr>
                        <tr class="spacer"></tr>

                    }


                </tbody>
            </table>

            @foreach (var item in Model)
            {
                <div class="profile-recent-fav">

                    <div class="profile-recent-fav-col">
                        @Html.DisplayNameFor(model => model.Id) :     @item.Id
                    </div>
                    <div class="profile-recent-fav-col">
                        @Html.DisplayNameFor(model => model.Price) :     @item.Price
                    </div>
                    <div class="profile-recent-fav-col">
                        @Html.DisplayNameFor(model => model.ConfirmPrice) :     @item.ConfirmPrice
                    </div>
                    <div class="profile-recent-fav-col">
                        @Html.DisplayNameFor(model => model.Code) :     @item.Code
                    </div>
                    <div class="profile-recent-fav-price">
                        <span class="amount-fav-product">
                            @Html.DisplayNameFor(model => model.Status) :    @{
                                var CreditStatus = "";
                                if (item.Status > 0)
                                {
                                    CreditStatus = EnumHelper<EnumCreditBillStatus>
                                    .GetDisplayValue(item.Status);
                                }
                            }
                            @CreditStatus

                        </span>
                    </div>
                    <div class="profile-recent-fav-col">
                        @Html.DisplayNameFor(model => model.DatePay) :                                @item.DatePay?.ConvertMiladiToShamsi()

                    </div>
                </div>


            }

        }
        else
        {
            <div class="profile-alert-container col-9 m-auto">
                <h6>
                    اطلاعاتی برای نمایش وجود ندارد
                </h6>
            </div>
        }

    </div>
</div>

@section Scripts
{

<script src="/js/vendor/ResizeSensor.min.js"></script>
<script src="/js/vendor/theia-sticky-sidebar.min.js"></script>
<script src="/js/vendor/wNumb.js"></script>
<script src="/js/vendor/nouislider.min.js"></script>

}