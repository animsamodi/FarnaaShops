@using EShop.Core.ExtensionMethods
@model IEnumerable<EShop.DataLayer.Entities.Blog>

@{
    Layout = null;
    int pagecount = (int)Math.Ceiling((double)ViewBag.count / 25);
    int pagenumber = ViewBag.PageNumber;

}

<section class="content-widget">
        @foreach (var item in Model)
        {
            <article class="post-item">
                <div class="post-thumb">
                    <a  asp-action="BlogDetail" asp-route-id="@item.Id" class="d-block">
                        <img src="https://media.farnaa.com/media/@item.Image" alt="@item.Title">
                    </a>
                </div>
                <div class="post-content">
                    <div class="title">
                        <a  asp-action="BlogDetail" asp-route-id="@item.Id">
                            <h2 class="title-tag">@item.Title</h2>
                        </a>
                    </div>
                    <div class="excerpt">
                        @item.ShortText	</div>
                    <span class="post-date">
                        <i class="fa fa-calendar"></i>
                        @item.PrDate
                    </span>
                </div>
            </article>
        }


    </section>
    <div class="pagination-product">
        <div class="col-12 text-center" id="paginationContainer">
            @(pagecount > 1 ? Html.Raw(pagecount.GetPaging(pagenumber, "js-pager-item")) : Html.Raw(""))

        </div>
    </div>

    <script>
        $('#paginationContainer').delegate(".js-pager-item",
            "click",
            function() {
                var pagenum = parseInt($(this).data("pagenumber"))
                $.ajax({
                    type: 'GET',
                    url: '@Url.Action("BlogList","Blogs")',
                    data: { pagenumber: pagenum },
                    success: function(res) {
                        $("#listBlog").html(res);
                    }
                })
            });

    </script>